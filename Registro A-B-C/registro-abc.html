    <!DOCTYPE html>
    <html class="dark" lang="es">
    <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Registro A-B-C - Loopi</title>

    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Lexend:wght@400;500;700&display=swap" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />

    <script>
        tailwind.config = {
        darkMode: "class",
        theme: {
            extend: {
            colors: {
                "primary": "#4f7df3",
                "background-light": "#f6f6f8",
                "background-dark": "#101522",
            },
            fontFamily: {
                "display": ["Lexend", "sans-serif"]
            },
            borderRadius: {
                "DEFAULT": "0.5rem",
                "lg": "1rem",
                "xl": "1.5rem",
                "full": "9999px"
            },
            },
        },
        }
    </script>

    <style>
        .material-symbols-outlined {
        font-variation-settings:
            'FILL' 0,
            'wght' 400,
            'GRAD' 0,
            'opsz' 24
        }
        body {
        min-height: max(884px, 100dvh);
        }
    </style>
    </head>

    <body class="bg-background-light dark:bg-background-dark font-display">
    <div class="relative flex h-auto min-h-screen w-full flex-col max-w-md mx-auto">

        <!-- Top App Bar -->
        <div
        class="sticky top-0 z-10 flex items-center justify-between bg-background-light/80 dark:bg-background-dark/80 p-4 pb-3 backdrop-blur-sm">
        <div class="flex size-12 shrink-0 items-center">
            <button id="backButton" class="flex items-center justify-center">
            <span class="material-symbols-outlined text-zinc-500 dark:text-zinc-400" style="font-size: 28px;">arrow_back</span>
            </button>
        </div>
        <h1 class="flex-1 text-center text-lg font-bold text-zinc-900 dark:text-white">Registro A-B-C</h1>
        <div class="flex w-24 items-center justify-end gap-2">
            <button id="abcConnectionButton"
            class="flex h-9 cursor-pointer items-center justify-center gap-1 overflow-hidden rounded-full bg-zinc-800/10 dark:bg-zinc-100/5 px-3 text-orange-500 dark:text-orange-400 text-xs font-semibold">
            <span id="abcConnectionIcon" class="material-symbols-outlined" style="font-size:20px;">wifi_off</span>
            <span id="abcConnectionText">Sin conexión</span>
            </button>
        </div>
        </div>

        <!-- Main Content -->
        <main class="flex-1 px-4 pb-28">

        <!-- Mensaje de feedback -->
        <p id="abcMessage" class="text-xs text-emerald-400 pt-2 min-h-[1rem]"></p>

        <!-- Section Antecedent (A) -->
        <section class="mb-4">
            <h2 class="text-zinc-800 dark:text-zinc-200 text-lg font-bold leading-tight tracking-[-0.015em] pb-2 pt-2">
            Antecedente (A)
            </h2>
            <div class="flex flex-wrap gap-2">
            <button
                class="chip flex h-12 flex-1 min-w-[120px] items-center justify-center gap-x-2 rounded-lg bg-zinc-200/50 dark:bg-zinc-800/80 px-4 py-2 text-zinc-800 dark:text-zinc-200"
                data-group="antecedente"
                data-value="Ruido fuerte">
                <span class="material-symbols-outlined">volume_up</span>
                <p class="text-sm font-medium">Ruido Fuerte</p>
            </button>

            <button
                class="chip flex h-12 flex-1 min-w-[120px] items-center justify-center gap-x-2 rounded-lg bg-zinc-200/50 dark:bg-zinc-800/80 px-4 py-2 text-zinc-800 dark:text-zinc-200"
                data-group="antecedente"
                data-value="Transición">
                <span class="material-symbols-outlined">swap_horiz</span>
                <p class="text-sm font-medium">Transición</p>
            </button>

            <button
                class="chip flex h-12 flex-1 min-w-[120px] items-center justify-center gap-x-2 rounded-lg bg-zinc-200/50 dark:bg-zinc-800/80 px-4 py-2 text-zinc-800 dark:text-zinc-200"
                data-group="antecedente"
                data-value="Negativa"
                data-selected="true">
                <span class="material-symbols-outlined">thumb_down</span>
                <p class="text-sm font-medium">Negativa</p>
            </button>

            <button
                class="chip flex h-12 flex-1 min-w-[120px] items-center justify-center gap-x-2 rounded-lg bg-zinc-200/50 dark:bg-zinc-800/80 px-4 py-2 text-zinc-800 dark:text-zinc-200"
                data-group="antecedente"
                data-value="Otro">
                <span class="material-symbols-outlined">add</span>
                <p class="text-sm font-medium">Otro</p>
            </button>
            </div>
        </section>

        <!-- Section Behavior (B) -->
        <section class="mb-4">
            <h2 class="text-zinc-800 dark:text-zinc-200 text-lg font-bold leading-tight tracking-[-0.015em] pb-2 pt-2">
            Conducta (B)
            </h2>
            <div class="flex flex-wrap gap-2">
            <button
                class="chip flex h-12 flex-1 min-w-[120px] items-center justify-center gap-x-2 rounded-lg bg-zinc-200/50 dark:bg-zinc-800/80 px-4 py-2 text-zinc-800 dark:text-zinc-200"
                data-group="conducta"
                data-value="Agitación">
                <span class="material-symbols-outlined">directions_run</span>
                <p class="text-sm font-medium">Agitación</p>
            </button>

            <button
                class="chip flex h-12 flex-1 min-w-[120px] items-center justify-center gap-x-2 rounded-lg bg-zinc-200/50 dark:bg-zinc-800/80 px-4 py-2 text-zinc-800 dark:text-zinc-200"
                data-group="conducta"
                data-value="Se retira"
                data-selected="true">
                <span class="material-symbols-outlined">logout</span>
                <p class="text-sm font-medium">Se retira</p>
            </button>

            <button
                class="chip flex h-12 flex-1 min-w-[120px] items-center justify-center gap-x-2 rounded-lg bg-zinc-200/50 dark:bg-zinc-800/80 px-4 py-2 text-zinc-800 dark:text-zinc-200"
                data-group="conducta"
                data-value="Grito">
                <span class="material-symbols-outlined">record_voice_over</span>
                <p class="text-sm font-medium">Grito</p>
            </button>
            </div>
        </section>

        <!-- Section Consequence (C) -->
        <section class="mb-6">
            <h2 class="text-zinc-800 dark:text-zinc-200 text-lg font-bold leading-tight tracking-[-0.015em] pb-2 pt-2">
            Consecuencia (C)
            </h2>
            <div class="flex flex-wrap gap-2">
            <button
                class="chip flex h-12 flex-1 min-w-[120px] items-center justify-center gap-x-2 rounded-lg bg-zinc-200/50 dark:bg-zinc-800/80 px-4 py-2 text-zinc-800 dark:text-zinc-200"
                data-group="consecuencia"
                data-value="Pausa"
                data-selected="true">
                <span class="material-symbols-outlined">pause_circle</span>
                <p class="text-sm font-medium">Pausa</p>
            </button>

            <button
                class="chip flex h-12 flex-1 min-w-[120px] items-center justify-center gap-x-2 rounded-lg bg-zinc-200/50 dark:bg-zinc-800/80 px-4 py-2 text-zinc-800 dark:text-zinc-200"
                data-group="consecuencia"
                data-value="Apoyo verbal">
                <span class="material-symbols-outlined">support</span>
                <p class="text-sm font-medium">Apoyo verbal</p>
            </button>

            <button
                class="chip flex h-12 flex-1 min-w-[120px] items-center justify-center gap-x-2 rounded-lg bg-zinc-200/50 dark:bg-zinc-800/80 px-4 py-2 text-zinc-800 dark:text-zinc-200"
                data-group="consecuencia"
                data-value="Cambio">
                <span class="material-symbols-outlined">open_in_new</span>
                <p class="text-sm font-medium">Cambio</p>
            </button>
            </div>
        </section>

        <!-- Additional Information -->
        <section class="space-y-4 mb-6">
            <textarea
            id="detailsInput"
            class="w-full rounded-xl border-none bg-zinc-200/60 dark:bg-zinc-800/80 p-4 text-zinc-900 dark:text-zinc-100 placeholder-zinc-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-primary"
            placeholder="¿Quieres añadir más detalles?"
            rows="3"></textarea>

            <div class="flex items-center gap-4">
            <button id="attachPhotoButton"
                class="flex h-14 flex-1 items-center justify-center gap-3 rounded-xl bg-zinc-200/60 dark:bg-zinc-800/80 text-zinc-800 dark:text-zinc-200">
                <span class="material-symbols-outlined">add_a_photo</span>
                <span class="font-medium">Adjuntar Foto</span>
            </button>

            <button
                class="chip flex h-14 flex-1 items-center justify-center gap-3 rounded-xl bg-zinc-200/60 dark:bg-zinc-800/80 text-zinc-800 dark:text-zinc-200"
                data-group="contexto"
                data-value="Casa"
                data-selected="true">
                <span class="material-symbols-outlined">home</span>
                <span class="font-medium">Casa</span>
            </button>
            </div>

            <!-- input oculto para la foto -->
            <input id="photoInput" type="file" accept="image/*" class="hidden" />
        </section>

        <!-- CTA -->
        <div class="py-4">
            <button id="registerEventButton"
            class="flex w-full cursor-pointer items-center justify-center overflow-hidden rounded-xl h-14 bg-primary text-white gap-2 text-base font-bold leading-normal tracking-[0.015em]">
            <span>Registrar Evento</span>
            </button>
        </div>

        <!-- Divider -->
        <div class="my-4 h-px bg-zinc-200 dark:bg-zinc-800"></div>

        <!-- History Section -->
        <section class="pb-8">
            <div class="flex items-center justify-between pb-4 pt-2">
            <h2 class="text-zinc-800 dark:text-zinc-200 text-lg font-bold">Eventos Recientes</h2>
            <button id="filterButton"
                class="flex items-center gap-2 rounded-full bg-zinc-200/60 dark:bg-zinc-800/80 px-4 py-2 text-sm font-medium text-zinc-800 dark:text-zinc-200">
                <span class="material-symbols-outlined" style="font-size: 20px;">filter_list</span>
                <span>Filtrar</span>
            </button>
            </div>

            <!-- Event History List -->
            <div id="eventsList" class="space-y-3">
            <!-- Event Card 1 -->
            <div class="flex flex-col gap-3 rounded-xl bg-zinc-100 dark:bg-zinc-900/50 p-4">
                <div class="flex items-center justify-between">
                <div class="flex items-center gap-2">
                    <span class="material-symbols-outlined text-red-500 dark:text-red-400">logout</span>
                    <p class="font-semibold text-zinc-800 dark:text-zinc-200">Se retira</p>
                </div>
                <p class="text-sm text-zinc-500 dark:text-zinc-400">14:32 - Hoy</p>
                </div>
                <div class="flex items-center gap-2 text-sm text-zinc-600 dark:text-zinc-300">
                <span class="font-bold text-zinc-400 dark:text-zinc-500">A:</span>
                <p>Negativa</p>
                <span class="font-bold text-zinc-400 dark:text-zinc-500">C:</span>
                <p>Pausa</p>
                </div>
            </div>

            <!-- Event Card 2 -->
            <div class="flex flex-col gap-3 rounded-xl bg-zinc-100 dark:bg-zinc-900/50 p-4">
                <div class="flex items-center justify-between">
                <div class="flex items-center gap-2">
                    <span class="material-symbols-outlined text-orange-500 dark:text-orange-400">record_voice_over</span>
                    <p class="font-semibold text-zinc-800 dark:text-zinc-200">Grito</p>
                </div>
                <p class="text-sm text-zinc-500 dark:text-zinc-400">09:15 - Ayer</p>
                </div>
                <div class="flex items-center gap-2 text-sm text-zinc-600 dark:text-zinc-300">
                <span class="font-bold text-zinc-400 dark:text-zinc-500">A:</span>
                <p>Ruido Fuerte</p>
                <span class="font-bold text-zinc-400 dark:text-zinc-500">C:</span>
                <p>Cambio de espacio</p>
                </div>
                <p class="text-sm italic text-zinc-500 dark:text-zinc-400 border-l-2 border-primary/50 pl-2">
                Estaba en el supermercado cuando sonó la alarma anti-incendios.
                </p>
            </div>

            <!-- Event Card 3 -->
            <div class="flex flex-col gap-3 rounded-xl bg-zinc-100 dark:bg-zinc-900/50 p-4">
                <div class="flex items-center justify-between">
                <div class="flex items-center gap-2">
                    <span class="material-symbols-outlined text-yellow-500 dark:text-yellow-400">directions_run</span>
                    <p class="font-semibold text-zinc-800 dark:text-zinc-200">Agitación</p>
                </div>
                <p class="text-sm text-zinc-500 dark:text-zinc-400">20:05 - 12/05/24</p>
                </div>
                <div class="flex items-center gap-2 text-sm text-zinc-600 dark:text-zinc-300">
                <span class="font-bold text-zinc-400 dark:text-zinc-500">A:</span>
                <p>Transición</p>
                <span class="font-bold text-zinc-400 dark:text-zinc-500">C:</span>
                <p>Apoyo verbal</p>
                </div>
            </div>
            </div>
        </section>
        </main>

        <!-- NAV INFERIOR -->
        <footer
        class="fixed bottom-0 left-0 right-0 bg-background-light/80 dark:bg-background-dark/80 backdrop-blur-lg border-t border-slate-200 dark:border-slate-800">
        <nav class="flex items-center justify-around h-20 max-w-md mx-auto">
            <a data-nav="rutinas"
            class="flex flex-col items-center justify-center text-zinc-500 dark:text-zinc-400 gap-1 w-full h-full"
            href="#">
            <span class="material-symbols-outlined">view_list</span>
            <span class="text-xs font-medium">Rutinas</span>
            </a>
            <a data-nav="comunicar"
            class="flex flex-col items-center justify-center text-zinc-500 dark:text-zinc-400 gap-1 w-full h-full"
            href="#">
            <span class="material-symbols-outlined">chat_bubble</span>
            <span class="text-xs font-medium">Comunicar</span>
            </a>
            <a data-nav="progreso"
            class="flex flex-col items-center justify-center text-primary gap-1 w-full h-full"
            href="#">
            <span class="material-symbols-outlined filled">bar_chart</span>
            <span class="text-xs font-bold">Progreso</span>
            </a>
            <a data-nav="emociones"
            class="flex flex-col items-center justify-center text-zinc-500 dark:text-zinc-400 gap-1 w-full h-full"
            href="#">
            <span class="material-symbols-outlined">sentiment_satisfied</span>
            <span class="text-xs font-medium">Emociones</span>
            </a>
            <a data-nav="ajustes"
            class="flex flex-col items-center justify-center text-zinc-500 dark:text-zinc-400 gap-1 w-full h-full"
            href="#">
            <span class="material-symbols-outlined">settings</span>
            <span class="text-xs font-medium">Ajustes</span>
            </a>
        </nav>
        </footer>
    </div>

    <!-- JS de esta pantalla -->
    <script src="registro-abc.js"></script>
    </body>
    </html>
